RenuPharm

# Setting up environment for development

Install node
Install yarn

> curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
> echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
> sudo apt-get update && sudo apt-get install yarn

Run webpack dev server

> bin/webpack-dev-server

Run rails server

> bin/rails s


## Local docker setup

> docker-compose run web rake db:create
> docker-compose run web rake db:migrate
> docker-compose run web rake db:seed



## Deployment

You will need to install the AWS CLI and the separate ECS CLI:

> pip install awscli --upgrade --user
> sudo curl -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
> sudo chmod +x /usr/local/bin/ecs-cli

Now configure the ECS CLI to allow deployments:

> ecs-cli configure --cluster renupharm --region eu-west-1 --default-launch-type EC2 --config-name renupharm
> ecs-cli configure profile --profile-name domhnall-renupharm --access-key <AWS_ACCESS_KEY_ID> --secret-key <AWS_SECRET_ACCESS_KEY>

The credentials are taken from the account under which you intend to use to connect to AWS.
We want to create a cluster to deploy our containers to:

> ecs-cli up --keypair domhnall-renupharm --capability-iam --size 1 --instance-type t2.micro --cluster-config renupharm

Upload your docker-compose file

> ecs-cli compose up --create-log-groups --cluster-config renupharm
